V// source: plugin/action_command_prompt/js/action_command_prompt.js\u000a$(function() {\u000a    function ActionCommandPromptViewModel(parameters) {\u000a        var self = this;\u000a\u000a        self.loginState = parameters[0];\u000a\u000a        self._modal = undefined;\u000a\u000a        self.requestData = function() {\u000a            if (!self.loginState.isUser()) return;\u000a\u000a            OctoPrint.plugins.action_command_prompt.get()\u000a                .done(self.fromResponse);\u000a        };\u000a\u000a        self.fromResponse = function(data) {\u000a            if (data.hasOwnProperty("text") && data.hasOwnProperty("choices")) {\u000a                self._showPrompt(data.text, data.choices);\u000a            }\u000a        };\u000a\u000a        self._showPrompt = function(text, buttons) {\u000a            var opts = {\u000a                title: gettext("Message from your printer"),\u000a                message: text,\u000a                selections: buttons,\u000a                onselect: function(index) {\u000a                    if (index > -1) {\u000a                        self._select(index);\u000a                    }\u000a                },\u000a                onclose: function() {\u000a                    self._modal = undefined;\u000a                }\u000a            };\u000a\u000a            self._modal = showSelectionDialog(opts)\u000a        };\u000a\u000a        self._select = function(index) {\u000a            OctoPrint.plugins.action_command_prompt.select(index);\u000a        };\u000a\u000a        self._closePrompt = function() {\u000a            if (self._modal) {\u000a                self._modal.modal("hide");\u000a            }\u000a        };\u000a\u000a        self.onStartupComplete = function() {\u000a            self.requestData();\u000a        };\u000a\u000a        self.onDataUpdaterPluginMessage = function(plugin, data) {\u000a            if (!self.loginState.isUser()) return;\u000a            if (plugin !== "action_command_prompt") {\u000a                return;\u000a            }\u000a\u000a            switch (data.action) {\u000a                case "show": {\u000a                    self._showPrompt(data.text, data.choices);\u000a                    break;\u000a                }\u000a                case "close": {\u000a                    self._closePrompt();\u000a                    break;\u000a                }\u000a            }\u000a        }\u000a\u000a    }\u000a\u000a    OCTOPRINT_VIEWMODELS.push({\u000a        construct: ActionCommandPromptViewModel,\u000a        dependencies: ["loginStateViewModel"]\u000a    });\u000a});\u000a\u000a;\u000a
p0
.