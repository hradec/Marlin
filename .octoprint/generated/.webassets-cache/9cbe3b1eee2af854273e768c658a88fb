V$(function() {\u000a    function ScreenSquishViewModel(parameters) {\u000a        var self = this;\u000a\u000a        self.settings = parameters[0];\u000a        self.temperatureViewModel = parameters[1];\u000a    \u000a        self.override_version = ko.observable(false);\u000a        self.show_override = ko.observable(false);\u000a\u000a        self.temperatureTab = $('#temp');\u000a        self.currentTabName = undefined;\u000a\u000a        self.settingsTabs = $('#settingsTabs a[data-toggle="tab"]');\u000a        self.settingsTabs.on('shown', function(e) {\u000a            self.ensureSettingsTabName();\u000a        });\u000a\u000a        self.ensureSettingsTabName = function() {\u000a            if (self.currentTabName != undefined) {\u000a                self.currentTabName.text($('#settingsTabs .active').text());\u000a                if ($('#squishSettingsTabButton').css('display') != 'none') {\u000a                    $('#squishSettingsMenuList').collapse('hide');\u000a                }\u000a            }\u000a        };\u000a\u000a        self.onStartup = function() {\u000a            // add the viewport\u000a            $('head').prepend('<meta name="viewport" content="width=device-width, initial-scale=1">');\u000a\u000a            // add title bar nav button\u000a            $('#navbar .container').prepend('<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a>');\u000a\u000a            // set up the collapsible settings nav\u000a            settingsDialogMenu = $('#settings_dialog_menu');\u000a            settingsTabButton = $('<button class="btn dropdown-toggle" id="squishSettingsTabButton"><i class="icon-align-justify"></i><span id="squishSettingsTabName"></span></button>');\u000a            settingsDialogMenu.append(settingsTabButton);\u000a            self.settingsMenuList = $('<div class="collapse in" id="squishSettingsMenuList"></div>');\u000a            settingsDialogMenu.append(self.settingsMenuList);\u000a            self.settingsMenuList.append($('#settingsTabs'));\u000a            self.currentTabName = $('#squishSettingsTabName');\u000a            settingsTabButton.on('click', function() {\u000a                self.settingsMenuList.collapse('toggle');\u000a            });\u000a            self.ensureSettingsTabName();\u000a\u000a            // gcode viewer\u000a            $('#gcode_canvas').wrap('<div class="gcode_canvas_clipper"></div>');\u000a\u000a            $('.nav-pills, .nav-tabs').tabdrop('layout');\u000a        };\u000a\u000a        self.onStartupComplete = function() {\u000a            // hide the units in temperature settings at the tablet breakpoint for space\u000a            $('#temp span.add-on').addClass('squish-temp-units');\u000a\u000a            max_version = self.settings.settings.plugins.ScreenSquish.octoprint_max_version();\u000a            if (max_version && max_version != '') {\u000a                self.override_version(true);\u000a                self.show_override(true);\u000a            }\u000a        };\u000a\u000a        self.onSettingsBeforeSave = function() {\u000a            version = '';\u000a            if (self.override_version()) {\u000a                version = $('span.version').text();\u000a            }\u000a            self.settings.settings.plugins.ScreenSquish.octoprint_max_version(version);\u000a            if (version == '' && self.show_override()) {\u000a                new PNotify({\u000a                    title: gettext("ScreenSquish auto off"),\u000a                    text: gettext("This won't take effect until OctoPrint has been restarted.")\u000a                });\u000a            }\u000a        }\u000a\u000a        self.updateScreenWidth = function() {\u000a            if (self.temperatureTab.is(":visible")) {\u000a                self.temperatureViewModel.updatePlot();\u000a            }\u000a        }\u000a\u000a        self.delayResize = undefined;\u000a        $(window).on("resize", function(e) {\u000a            clearTimeout(self.delayResize);\u000a            self.delayResize = setTimeout(function() {\u000a                self.updateScreenWidth();\u000a            }, 500);\u000a        });\u000a    }\u000a\u000a    OCTOPRINT_VIEWMODELS.push([\u000a        ScreenSquishViewModel,\u000a        ["settingsViewModel", "temperatureViewModel"],\u000a        ["#screen_squish_settings"]\u000a    ]);\u000a});\u000a\u000a;\u000a
p0
.